// 動物占いアプリのJavaScript

// 生年月データテーブル（1930-2030年）
const birthYearMonthTable = {
    1930: [47, 18, 46, 17, 47, 18, 48, 19, 50, 20, 51, 21],
    1931: [52, 23, 51, 22, 52, 23, 53, 24, 55, 25, 56, 26],
    1932: [57, 28, 57, 28, 58, 29, 59, 30, 1, 31, 2, 32],
    1933: [3, 34, 2, 33, 3, 34, 4, 35, 6, 36, 7, 37],
    1934: [8, 39, 7, 38, 8, 39, 9, 40, 11, 41, 12, 42],
    1935: [13, 44, 12, 43, 13, 44, 14, 45, 16, 46, 17, 47],
    1936: [18, 49, 18, 49, 19, 50, 20, 51, 22, 52, 23, 53],
    1937: [24, 55, 23, 54, 24, 55, 25, 56, 27, 57, 28, 58],
    1938: [29, 60, 28, 59, 29, 60, 30, 1, 32, 2, 33, 3],
    1939: [34, 5, 33, 4, 34, 5, 35, 6, 37, 7, 38, 8],
    1940: [39, 10, 39, 10, 40, 11, 41, 12, 43, 13, 44, 14],
    1941: [45, 16, 44, 15, 45, 16, 46, 17, 48, 18, 49, 19],
    1942: [50, 21, 49, 20, 50, 21, 51, 22, 53, 23, 54, 24],
    1943: [55, 26, 54, 25, 55, 26, 56, 27, 58, 28, 59, 29],
    1944: [0, 31, 0, 31, 1, 32, 2, 33, 4, 34, 5, 35],
    1945: [6, 37, 5, 36, 6, 37, 7, 38, 9, 39, 10, 40],
    1946: [11, 42, 10, 41, 11, 42, 12, 43, 14, 44, 15, 45],
    1947: [16, 47, 15, 46, 16, 47, 17, 48, 19, 49, 20, 50],
    1948: [21, 52, 21, 52, 22, 53, 23, 54, 25, 55, 26, 56],
    1949: [27, 58, 26, 57, 27, 58, 28, 59, 30, 60, 31, 1],
    1950: [32, 3, 31, 2, 32, 3, 33, 4, 35, 5, 36, 6],
    1951: [37, 8, 36, 7, 37, 8, 38, 9, 40, 10, 41, 11],
    1952: [42, 13, 42, 13, 43, 14, 44, 15, 46, 16, 47, 17],
    1953: [48, 19, 47, 18, 48, 19, 49, 20, 51, 21, 52, 22],
    1954: [53, 24, 52, 23, 53, 24, 54, 25, 56, 26, 57, 27],
    1955: [58, 29, 57, 28, 58, 29, 59, 30, 1, 31, 2, 32],
    1956: [3, 34, 3, 34, 4, 35, 5, 36, 7, 37, 8, 38],
    1957: [9, 40, 8, 39, 9, 40, 10, 41, 12, 42, 13, 43],
    1958: [14, 45, 13, 44, 14, 45, 15, 46, 17, 47, 18, 48],
    1959: [19, 50, 18, 49, 19, 50, 20, 51, 22, 52, 23, 53],
    1960: [24, 55, 24, 55, 25, 56, 26, 57, 28, 58, 29, 59],
    1961: [30, 1, 29, 60, 30, 1, 31, 2, 33, 3, 34, 4],
    1962: [35, 6, 34, 5, 35, 6, 36, 7, 38, 8, 39, 9],
    1963: [40, 11, 39, 10, 40, 11, 41, 12, 43, 13, 44, 14],
    1964: [45, 16, 45, 16, 46, 17, 47, 18, 49, 19, 50, 20],
    1965: [51, 22, 50, 21, 51, 22, 52, 23, 54, 24, 55, 25],
    1966: [56, 27, 55, 26, 56, 27, 57, 28, 59, 29, 60, 30],
    1967: [1, 32, 60, 31, 1, 32, 2, 33, 4, 34, 5, 35],
    1968: [6, 37, 6, 37, 7, 38, 8, 39, 10, 40, 11, 41],
    1969: [12, 43, 11, 42, 12, 43, 13, 44, 15, 45, 16, 46],
    1970: [17, 48, 16, 47, 17, 48, 18, 49, 20, 50, 21, 51],
    1971: [22, 53, 21, 52, 22, 53, 23, 54, 25, 55, 26, 56],
    1972: [27, 58, 27, 58, 28, 59, 29, 60, 31, 1, 32, 2],
    1973: [33, 4, 32, 3, 33, 4, 34, 5, 36, 6, 37, 7],
    1974: [38, 9, 37, 8, 38, 9, 39, 10, 41, 11, 42, 12],
    1975: [43, 14, 42, 13, 43, 14, 44, 15, 46, 16, 47, 17],
    1976: [48, 19, 48, 19, 49, 20, 50, 21, 52, 22, 53, 23],
    1977: [54, 25, 53, 24, 54, 25, 55, 26, 57, 27, 58, 28],
    1978: [59, 30, 58, 29, 59, 30, 60, 31, 2, 32, 3, 33],
    1979: [4, 35, 3, 34, 4, 35, 5, 36, 7, 37, 8, 38],
    1980: [9, 40, 9, 40, 10, 41, 11, 42, 13, 43, 14, 44],
    1981: [15, 46, 14, 45, 15, 46, 16, 47, 18, 48, 19, 49],
    1982: [20, 51, 19, 50, 20, 51, 21, 52, 23, 53, 24, 54],
    1983: [25, 56, 24, 55, 25, 56, 26, 57, 28, 58, 29, 59],
    1984: [30, 1, 30, 1, 31, 2, 32, 3, 34, 4, 35, 5],
    1985: [36, 7, 35, 6, 36, 7, 37, 8, 39, 9, 40, 10],
    1986: [41, 12, 40, 11, 41, 12, 42, 13, 44, 14, 45, 15],
    1987: [46, 17, 45, 16, 46, 17, 47, 18, 49, 19, 50, 20],
    1988: [51, 22, 51, 22, 52, 23, 53, 24, 55, 25, 56, 26],
    1989: [57, 28, 56, 27, 57, 28, 58, 29, 60, 30, 1, 31],
    1990: [2, 33, 1, 32, 2, 33, 3, 34, 5, 35, 6, 36],
    1991: [7, 38, 6, 37, 7, 38, 8, 39, 10, 40, 11, 41],
    1992: [12, 43, 12, 43, 13, 44, 14, 45, 16, 46, 17, 47],
    1993: [18, 49, 17, 48, 18, 49, 19, 50, 21, 51, 22, 52],
    1994: [23, 54, 22, 53, 23, 54, 24, 55, 26, 56, 27, 57],
    1995: [28, 59, 27, 58, 28, 59, 29, 60, 31, 1, 32, 2],
    1996: [33, 4, 33, 4, 34, 5, 35, 6, 37, 7, 38, 8],
    1997: [39, 10, 38, 9, 39, 10, 40, 11, 42, 12, 43, 13],
    1998: [44, 15, 43, 14, 44, 15, 45, 16, 47, 17, 48, 18],
    1999: [49, 20, 48, 19, 49, 20, 50, 21, 52, 22, 53, 23],
    2000: [54, 25, 54, 25, 55, 26, 56, 27, 58, 28, 59, 29],
    2001: [60, 31, 59, 30, 60, 31, 1, 32, 3, 33, 4, 34],
    2002: [5, 36, 4, 35, 5, 36, 6, 37, 8, 38, 9, 39],
    2003: [10, 41, 9, 40, 10, 41, 11, 42, 13, 43, 14, 44],
    2004: [15, 46, 15, 46, 16, 47, 17, 48, 19, 49, 20, 50],
    2005: [21, 52, 20, 51, 21, 52, 22, 53, 24, 54, 25, 55],
    2006: [26, 57, 25, 56, 26, 57, 27, 58, 29, 59, 30, 60],
    2007: [31, 2, 30, 1, 31, 2, 32, 3, 34, 4, 35, 5],
    2008: [36, 7, 36, 7, 37, 8, 38, 9, 40, 10, 41, 11],
    2009: [42, 13, 41, 12, 42, 13, 43, 14, 45, 15, 46, 16],
    2010: [47, 18, 46, 17, 47, 18, 48, 19, 50, 20, 51, 21],
    2011: [52, 23, 51, 22, 52, 23, 53, 24, 55, 25, 56, 26],
    2012: [57, 28, 57, 28, 58, 29, 59, 30, 1, 31, 2, 32],
    2013: [3, 34, 2, 33, 3, 34, 4, 35, 6, 36, 7, 37],
    2014: [8, 39, 7, 38, 8, 39, 9, 40, 11, 41, 12, 42],
    2015: [13, 44, 12, 43, 13, 44, 14, 45, 16, 46, 17, 47],
    2016: [18, 49, 18, 49, 19, 50, 20, 51, 22, 52, 23, 53],
    2017: [24, 55, 23, 54, 24, 55, 25, 56, 27, 57, 28, 58],
    2018: [29, 60, 28, 59, 29, 60, 30, 1, 32, 2, 33, 3],
    2019: [34, 5, 33, 4, 34, 5, 35, 6, 37, 7, 38, 8],
    2020: [39, 10, 39, 10, 40, 11, 41, 12, 43, 13, 44, 14],
    2021: [45, 16, 44, 15, 45, 16, 46, 17, 48, 18, 49, 19],
    2022: [50, 21, 49, 20, 50, 21, 51, 22, 53, 23, 54, 24],
    2023: [55, 26, 54, 25, 55, 26, 56, 27, 58, 28, 59, 29],
    2024: [0, 31, 0, 31, 1, 32, 2, 33, 4, 34, 5, 35],
    2025: [6, 37, 5, 36, 6, 37, 7, 38, 9, 39, 10, 40],
    2026: [11, 42, 10, 41, 11, 42, 12, 43, 14, 44, 15, 45],
    2027: [16, 47, 15, 46, 16, 47, 17, 48, 19, 49, 20, 50],
    2028: [21, 52, 21, 52, 22, 53, 23, 54, 25, 55, 26, 56],
    2029: [27, 58, 26, 57, 27, 58, 28, 59, 30, 60, 31, 1],
    2030: [32, 3, 31, 2, 32, 3, 33, 4, 35, 5, 36, 6]
};

// 60種類の動物キャラクターデータ
const animalCharacters = {
    1: { name: "長距離ランナーのチータ", icon: "🐆", group: "SUN（太陽）", personality: "子どもっぽさが魅力の好青年キャラ。夢とロマンを求める寂しがり屋。理想主義的で不正を許さない正義感を持つ人。" },
    2: { name: "社交家のたぬき", icon: "🦝", group: "EARTH（地球）", personality: "弱音をはかない気配りの天才。真面目で飾り気の無い印象を与え、優しい話し方で相手に合わせ、自分の出方を考える人。" },
    3: { name: "落ち着きのない猿", icon: "🐵", group: "EARTH（地球）", personality: "頭の回転が速く活発で、周りの人に元気を与える太陽のような人。親切で世話好き。人に物を教えるのが上手なタイプ。" },
    4: { name: "フットワークの軽い子守熊", icon: "🐨", group: "EARTH（地球）", personality: "世話好きだけど甘えん坊。物分りがよく要領がいい世話好きだが、自尊心が強く疑い深い面も。要領のいい世渡り上手。" },
    5: { name: "面倒見のいい黒ひょう", icon: "🐱", group: "MOON（月）", personality: "身のこなしはスタイリッシュ。スマートでおしゃれなアーティスト。細かいこと気にせず、明るくのびのびした性格。" },
    6: { name: "愛情あふれる虎", icon: "🐅", group: "EARTH（地球）", personality: "人当たりがソフトで温厚。包容力のある楽天家。明るく活発な印象を与え、社交的で人望も厚く、弱者を守る親分肌。" },
    7: { name: "全力疾走するチータ", icon: "🐆", group: "SUN（太陽）", personality: "大志を胸に抱いた冒険家。分析力と独創性に富んだシャープな感性の人。妥協を嫌うため周囲の人と衝突することも。" },
    8: { name: "磨き上げられたたぬき", icon: "🦝", group: "EARTH（地球）", personality: "愛想が良く、嫌な事があっても表情には出さない。努力を惜しまない頑固者。目上の人らか可愛がられるタイプ。" },
    9: { name: "大きな志をもった猿", icon: "🐵", group: "EARTH（地球）", personality: "心は太平洋のように大きくゆったり。好奇心旺盛で活動的な人。仕事や勉強だけでなく、遊びや趣味にも熱心な努力家。" },
    10: { name: "母性豊かな子守熊", icon: "🐨", group: "EARTH（地球）", personality: "豊かな想像力と直感力。天才的な閃きで方針をコロコロ変える気まぐれさと、コツコツ努力を積む慎重さが同居している。" },
    11: { name: "正直なこじか", icon: "🦌", group: "MOON（月）", personality: "外見や態度に飾り気が無く、裏表の無い素朴な性格の人。いつまでも若々しくピュアなハートを持つ情熱家タイプ。" },
    12: { name: "人気者のゾウ", icon: "🐘", group: "SUN（太陽）", personality: "素朴で飾り気がない無頓着さを装っているが、内心は神経質で敏感な心の持ち主。政治力もあり、常にトップを狙っている。" },
    13: { name: "ネアカの狼", icon: "🐺", group: "EARTH（地球）", personality: "独特の感性と感性を持ち、未来を切り拓く職人気質。マイペースで天真爛漫な人で、自立した人間関係を好む個人主義者。" },
    14: { name: "協調性のないひつじ", icon: "🐑", group: "MOON（月）", personality: "交際上手で人のペースに合わせられる、あっさりした嫌味の無い性格。孤独が嫌いで、いつも人の輪の中にいる人。" },
    15: { name: "どっしりとした猿", icon: "🐵", group: "EARTH（地球）", personality: "ここ１番にかける勝負師。美意識の強い情熱家。カンが良く何でも器用にこなし、上達が早い。時代を先取るのも上手。" },
    16: { name: "コアラのなかの子守熊", icon: "🐨", group: "EARTH（地球）", personality: "親しみやすく気品と教養があり、周囲から尊敬される人。争いを避け円満な人間関係を望むため、なかなか本音を言わない。" },
    17: { name: "強い意志をもったこじか", icon: "🦌", group: "MOON（月）", personality: "思いやりが深く優しい性格だが、自分のポリシーを曲げない信念の強い人。争いごとが嫌いで上下関係や礼儀を重んじる。" },
    18: { name: "デリケートなゾウ", icon: "🐘", group: "SUN（太陽）", personality: "一芸勝負で世渡り上手。頑固な性格なので人付き合いは苦手。甘えや依存がなく束縛を嫌う。妥協を許さない完璧主義者。" },
    19: { name: "放浪の狼", icon: "🐺", group: "EARTH（地球）", personality: "発想力と実行力がピカイチ。新しいことが大好きで変化を求める冒険家。俗世間には無関心で我が道を行く旅人。" },
    20: { name: "物静かなひつじ", icon: "🐑", group: "MOON（月）", personality: "冷静沈着で、どっしりとした風格を与える人。良し悪しの判断が的確。努力と根性をテーマにする純粋で真面目な人。" },
    21: { name: "落ち着きのあるペガサス", icon: "🦄", group: "SUN（太陽）", personality: "気力と努力と根性がテーマで何事も妥協しない人。荒削りで豪快だが、素直で愛嬌があり、周囲に好かれる爽やかなタイプ。" },
    22: { name: "強靭な翼を持つペガサス", icon: "🦄", group: "SUN（太陽）", personality: "折り目正しく上品で、穏和な性格。根気と忍耐力を持ち、少々のことでは動じない器の大きい人間。独立心旺盛な行動派。" },
    23: { name: "無邪気なひつじ", icon: "🐑", group: "MOON（月）", personality: "見栄を張らず、ゆったりした雰囲気を持つ。群れるのを嫌う変わり者。理想がハッキリしていて、より高い環境を望む。" },
    24: { name: "クリエイティブな狼", icon: "🐺", group: "EARTH（地球）", personality: "教養・知識ともに豊かな人。他人の指図は受けない学者肌。純真さと冷静さをあわせもつバランス派タイプ。" },
    25: { name: "穏やかな狼", icon: "🐺", group: "EARTH（地球）", personality: "几帳面で裏表が無く、正義感が強い人。天真爛漫で気高い精神の持ち主。少女的・少年的なあどけなさが残る現実派。" },
    26: { name: "粘り強いひつじ", icon: "🐑", group: "MOON（月）", personality: "深く考え動く慎重派。主観だけでは動かない冷静さがある。勉強家で博識。気分で言うことがコロコロ変わるお天気屋。" },
    27: { name: "波乱に満ちたペガサス", icon: "🦄", group: "SUN（太陽）", personality: "束縛嫌いの自由人。物覚えが早く、なんでも器用にこなす。人受けはいいが恥ずかしがり屋。ざっくばらんで気配り上手。" },
    28: { name: "優雅なペガサス", icon: "🦄", group: "SUN（太陽）", personality: "物腰が柔らかく奥ゆかしい、気品あふれる紳士淑女タイプ。雑学知識が豊富で、いつも話題にこと欠かさない社交家。" },
    29: { name: "チャレンジ精神の旺盛なひつじ", icon: "🐑", group: "MOON（月）", personality: "人当たりが柔らかく、落ちついた態度と物静かな雰囲気で誰からも好感を持たれる。冷静に物事を判断できる事業家タイプ。" },
    30: { name: "順応性のある狼", icon: "🐺", group: "EARTH（地球）", personality: "つねに堂々としている人。理想を現実にしていくパワフルな政治家タイプ。冷静沈着で公明正大な観音様のような人。" },
    31: { name: "リーダーとなるゾウ", icon: "🐘", group: "SUN（太陽）", personality: "義理人情に厚く、正義感あふれる情熱家。誰の前でも臆することなく悠々と構え、自分の価値観をシッカリ持っている人。" },
    32: { name: "しっかり者のこじか", icon: "🦌", group: "MOON（月）", personality: "理不尽嫌いな正義の味方。人を喜ばせるのが大好きで、頼まれたら嫌と言えないお人よし。周囲に可愛がられるタイプ。" },
    33: { name: "活動的な子守熊", icon: "🐨", group: "EARTH（地球）", personality: "飛び抜けた才能を持つアイデアマン。穏和な雰囲気を与え、愛嬌があり人懐っこい。バイタリティあふれる理想主義者。" },
    34: { name: "気分野の猿", icon: "🐵", group: "EARTH（地球）", personality: "権力に立ち向かう闘争家で、自然に人を魅了するカリスマ。器用で飲み込みが早く、優れた集中力で不可能を可能にする。" },
    35: { name: "頼られると嬉しいひつじ", icon: "🐑", group: "MOON（月）", personality: "理想を追う情熱家。強烈な個性を持った八方美人。顔が広く人脈も豊富で、細かい配慮ができるリーダー的素質を持つ。" },
    36: { name: "好感のもたれる狼", icon: "🐺", group: "EARTH（地球）", personality: "いつも客観的で落ちついている「歩く常識」。器用で多才、強烈な個性を放つ。知的でユーモア満載のタレント芸術家。" },
    37: { name: "まっしぐらに突き進むゾウ", icon: "🐘", group: "SUN（太陽）", personality: "感受性豊かで想像力に富んだ、強烈な個性の持ち主。物事を分析する能力が高く、人を見抜いたり先読みする力に優れている。" },
    38: { name: "華やかなこじか", icon: "🦌", group: "MOON（月）", personality: "感情豊かな夢見る少女タイプ。人から愛されたいという気持ちが強い。子供のように純粋なので心が揺れやすい面も。" },
    39: { name: "夢とロマンの子守熊", icon: "🐨", group: "EARTH（地球）", personality: "人情味あふれる派手好き。一本気で卑怯なことを嫌う、竹を割ったような性格。情にもろく人の世話まで背負い込むお人よし。" },
    40: { name: "尽くす猿", icon: "🐵", group: "EARTH（地球）", personality: "褒められたい頑張り屋さん。鋭い感受性と直観力で人の気持ちをすぐに察する。世話好きで親切な肝っ玉母さんタイプ。" },
    41: { name: "大器晩成のたぬき", icon: "🦝", group: "EARTH（地球）", personality: "受け身の構えで人に接し、愛嬌をもって、誰からも好感を持たれる温かい雰囲気の持ち主。控えめで芯の強いしっかり者。" },
    42: { name: "足腰の強いチータ", icon: "🐆", group: "SUN（太陽）", personality: "商売上手なシッカリ者で、思ったことはサッと行動に移すテキパキした性格。夢や理想に向かって前進していく情熱家。" },
    43: { name: "動きまわる虎", icon: "🐅", group: "EARTH（地球）", personality: "頭の回転が速い理論家。マイペースで悠然とした印象を与えるが、内面は繊細な神経と、鋭い観察眼が隠れている。" },
    44: { name: "情熱的な黒ひょう", icon: "🐱", group: "MOON（月）", personality: "感性鋭く刺激を好む流行ウォッチャー。感情の起伏が激しく勝気で情熱的なシッカリ者。腰が低く人当たりは柔らかい。" },
    45: { name: "サービス精神旺盛な子守熊", icon: "🐨", group: "EARTH（地球）", personality: "キビキビ明るい社交家。意志が強く、自分が描いた夢に向かって長期的な展望をもって望む人。心配性のロマンチスト。" },
    46: { name: "守りの猿", icon: "🐵", group: "EARTH（地球）", personality: "スマートで上品な理論派。人を引き立て自分を生かす働き者。相手の気持ちを上手にくみ取り、幅広い世代と付き合える人。" },
    47: { name: "人間味あふれるたぬき", icon: "🦝", group: "EARTH（地球）", personality: "もめごとの仲裁が上手。場を和ませ人間関係の摩擦をなくす潤滑油的存在。礼儀正しく、誠実・勤勉・忍耐がモットー。" },
    48: { name: "品格のあるチータ", icon: "🐆", group: "SUN（太陽）", personality: "涙もろく情に厚い情熱家。直感で行動する。誰とでもうち解けられる社交人タイプだが、人の好き嫌いはハッキリしている。" },
    49: { name: "ゆったりとした悠然の虎", icon: "🐅", group: "EARTH（地球）", personality: "人見知りせず元気いっぱい。おおらかで母性的な包容力が魅力の人。頭の回転が速く、物事の判断や人間観察は的確。" },
    50: { name: "落ち込みの激しい黒ひょう", icon: "🐱", group: "MOON（月）", personality: "先見の明を持つ人。機転が利きどんな環境にも臨機応変に対処するが八方美人な一面も。チャンスを逃さない努力家。" },
    51: { name: "我が道を行くライオン", icon: "🦁", group: "SUN（太陽）", personality: "意志が強く決して弱音をはかない、自分にも他人にも厳しい人。負けず嫌いで忍耐強く、妥協を許さない完璧主義者。" },
    52: { name: "統率力のあるライオン", icon: "🦁", group: "SUN（太陽）", personality: "優雅で清潔な印象を与え、その場をパッと明るくする人。内面、警戒心が強く自分の意思や感情をあまり表に出さない。" },
    53: { name: "感情豊かな黒ひょう", icon: "🐱", group: "MOON（月）", personality: "ナイーブな心をもった天才肌。頭の回転が速く、時代を先取りする能力が抜群に高い。空想好きの夢見る乙女タイプ。" },
    54: { name: "楽天的な虎", icon: "🐅", group: "EARTH（地球）", personality: "誰とでも平等に接する開放的な人。他人には甘いため人から相談されやすい。頼まれると嫌と言えない奉公精神の持ち主。" },
    55: { name: "パワフルな虎", icon: "🐅", group: "EARTH（地球）", personality: "行動力バツグンの自信家。物怖じせず、お世辞も言わず、誰に対しても論理的にハッキリ物を言うので、一目置かれる存在。" },
    56: { name: "気取らない黒ひょう", icon: "🐱", group: "MOON（月）", personality: "ありのままに生きる素朴な人。誰に対しても誠実で、素直な態度で接する人格者。義理人情に厚く包容力も豊か。" },
    57: { name: "感情的なライオン", icon: "🦁", group: "SUN（太陽）", personality: "真面目で、白黒ハッキリさせる分析屋。竹を割ったようなサッパリした性格のため、むしろ毒舌に近い率直さが長所。" },
    58: { name: "傷つきやすいライオン", icon: "🦁", group: "SUN（太陽）", personality: "高潔で純粋な道徳者。気は優しいけど頑固者。困ったときでも他人を当てにせず、自力で脱出しようと努力する。" },
    59: { name: "束縛を嫌う黒ひょう", icon: "🐱", group: "MOON（月）", personality: "情緒豊かなロマンチスト。礼儀正しく落ちついた穏やかな人。何事にも慎重に行動し、軽はずみな失敗を起こさない。" },
    60: { name: "慈悲深い虎", icon: "🐅", group: "EARTH（地球）", personality: "理想高い博愛精神の持ち主。純粋無垢な印象が強く、同性からも異性からも注目される。明るく朗らかで世話好き。" }
};

// DOM要素の取得
const yearSelect = document.getElementById('year');
const monthSelect = document.getElementById('month');
const daySelect = document.getElementById('day');
const calculateBtn = document.getElementById('calculateBtn');
const resultSection = document.getElementById('resultSection');
const resetBtn = document.getElementById('resetBtn');

// 年の選択肢を生成（1930-2030年）
function populateYearOptions() {
    const currentYear = new Date().getFullYear();
    for (let year = currentYear; year >= 1930; year--) {
        const option = document.createElement('option');
        option.value = year;
        option.textContent = `${year}年`;
        yearSelect.appendChild(option);
    }
    
    // 2030年まで追加
    for (let year = currentYear + 1; year <= 2030; year++) {
        const option = document.createElement('option');
        option.value = year;
        option.textContent = `${year}年`;
        yearSelect.appendChild(option);
    }
}

// 日の選択肢を生成
function populateDayOptions() {
    daySelect.innerHTML = '<option value="">日を選択</option>';
    
    const year = parseInt(yearSelect.value);
    const month = parseInt(monthSelect.value);
    
    if (year && month) {
        const daysInMonth = new Date(year, month, 0).getDate();
        
        for (let day = 1; day <= daysInMonth; day++) {
            const option = document.createElement('option');
            option.value = day;
            option.textContent = `${day}日`;
            daySelect.appendChild(option);
        }
    }
}

// 動物占いの計算
function calculateAnimalCharacter(year, month, day) {
    if (!birthYearMonthTable[year]) {
        throw new Error('対応していない年です');
    }
    
    const baseNumber = birthYearMonthTable[year][month - 1];
    let result = baseNumber + day;
    
    // 61以上の場合は60を引く
    if (result >= 61) {
        result -= 60;
    }
    
    // 0の場合は60とする
    if (result === 0) {
        result = 60;
    }
    
    return result;
}

// 結果の表示
function displayResult(characterNumber) {
    const character = animalCharacters[characterNumber];
    
    document.getElementById('animalIcon').textContent = character.icon;
    document.getElementById('animalName').textContent = character.name;
    document.getElementById('animalGroup').textContent = character.group;
    document.getElementById('animalPersonality').textContent = character.personality;
    
    // 結果セクションを表示
    resultSection.classList.remove('hidden');
    
    // 結果セクションまでスクロール
    resultSection.scrollIntoView({ 
        behavior: 'smooth',
        block: 'start'
    });
}

// 入力値の検証
function validateInputs() {
    const year = yearSelect.value;
    const month = monthSelect.value;
    const day = daySelect.value;
    
    return year && month && day;
}

// エラーメッセージの表示
function showError(message) {
    alert(`❌ ${message}`);
}

// 成功メッセージの表示
function showSuccess() {
    // 簡単な視覚効果
    calculateBtn.style.transform = 'scale(0.95)';
    setTimeout(() => {
        calculateBtn.style.transform = 'scale(1)';
    }, 150);
}

// イベントリスナーの設定
document.addEventListener('DOMContentLoaded', function() {
    // 年の選択肢を生成
    populateYearOptions();
    
    // 年と月の変更時に日の選択肢を更新
    yearSelect.addEventListener('change', populateDayOptions);
    monthSelect.addEventListener('change', populateDayOptions);
    
    // 占うボタンのクリック
    calculateBtn.addEventListener('click', function() {
        try {
            if (!validateInputs()) {
                showError('生年月日をすべて入力してください 💕');
                return;
            }
            
            const year = parseInt(yearSelect.value);
            const month = parseInt(monthSelect.value);
            const day = parseInt(daySelect.value);
            
            const characterNumber = calculateAnimalCharacter(year, month, day);
            
            showSuccess();
            setTimeout(() => {
                displayResult(characterNumber);
            }, 200);
            
        } catch (error) {
            showError(error.message || '計算中にエラーが発生しました');
        }
    });
    
    // リセットボタンのクリック
    resetBtn.addEventListener('click', function() {
        yearSelect.value = '';
        monthSelect.value = '';
        daySelect.innerHTML = '<option value="">日を選択</option>';
        resultSection.classList.add('hidden');
        
        // 入力フォームまでスクロール
        document.querySelector('.input-section').scrollIntoView({ 
            behavior: 'smooth',
            block: 'start'
        });
    });
    
    // Enterキーでの実行
    [yearSelect, monthSelect, daySelect].forEach(element => {
        element.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                calculateBtn.click();
            }
        });
    });
});

// デバッグ用：コンソールにテストを出力
console.log('🐾 動物占いアプリが読み込まれました！');
console.log('テスト計算: 1981年5月6日 = キャラクター番号', calculateAnimalCharacter(1981, 5, 6));